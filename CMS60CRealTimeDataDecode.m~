function [RealTimeData RealTimeArray] = CMS60CRealTimeDataDecode(DataPackage)
%
% decode the data package sent by the CMS60C
% based on the specfication in the communication protocol v7.0
%
% input is an 8 byte message
% output is a matlab data structure

RealTimeData.decoded = FALSE;

if length(dataPackage) ~= 8
    RealTimeData.Status = 'DataPackage was not 8 bytes long';
    return;
end

%Byte 1 - something

%Byte 2 - monitor status info
RealTimeData.SignalStrength = bitand(DataPackage(2), 15);  % bits 0-3
RealTimeData.SearchTimeOut  = bitand(DataPackage(2), 16);  % bit 4
RealTimeData.LowSPO2        = bitand(DataPackage(2), 32);  % bit 5 
RealTimeData.PulseBeep      = bitand(DataPackage(2), 64);  % bit 6
RealTimeData.ProbeError     = bitand(DataPackage(2), 128);  % bit 7

%Byte 3 - Pulse Waveform Data
RealTimeData.PulseWaveForm         = bitand(DataPackage(3), 127);  % bits 0-6
RealTimeData.SearchingForPulse     = bitand(DataPackage(3), 128);  % bit 7

%Byte 4 - Bar Graph Data
RealTimeData.BarGraph         = bitand(DataPackage(4), 15);  % bits 0-3
RealTimeData.PIInvalid        = bitand(DataPackage(4), 16);  % bit 4

%Byte 5 - Pulse Rate
RealTimeData.PulseRate         = bitand(DataPackage(5), 255);  % bits 0-7
if RealTimeData.PulseRate > 254 % only valid upto 254
    RealTimeData.PulseRate = -1;

%Byte 6 - SPO2
RealTimeData.SPO2               = bitand(DataPackage(5), 255);  % bits 0-7
if RealTimeData.SPO2 > 100 %only valid upto 100
    RealTimeData.SPO2 = -1;
end

%Byte 7 - LowPI Waveform Data
RealTimeData.LowPI               = bitand(DataPackage(5), 255);  % bits 0-7

%Byte 8 - Pulse Waveform Data
RealTimeData.SPO2               = bitand(DataPackage(5), 255);  % bits 0-7


SignalStrength

HeartRate
SPO2
LowPI 
HighPI

PulseWaveForm
BarGraph